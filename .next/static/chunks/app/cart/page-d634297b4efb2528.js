(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{81678:(e,n,s)=>{Promise.resolve().then(s.bind(s,22894))},2291:(e,n,s)=>{"use strict";s.d(n,{S:()=>d});var r=s(95155),l=s(12115),t=s(86352),i=s(98867),a=s(21567);let d=l.forwardRef((e,n)=>{let{className:s,...l}=e;return(0,r.jsx)(t.bL,{ref:n,className:(0,a.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:(0,r.jsx)(t.C1,{className:(0,a.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})})});d.displayName=t.bL.displayName},33900:(e,n,s)=>{"use strict";s.d(n,{p:()=>i});var r=s(95155),l=s(12115),t=s(21567);let i=l.forwardRef((e,n)=>{let{className:s,type:l,...i}=e;return(0,r.jsx)("input",{type:l,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...i})});i.displayName="Input"},15157:(e,n,s)=>{"use strict";s.d(n,{w:()=>a});var r=s(95155),l=s(12115),t=s(90434),i=s(21567);let a=l.forwardRef((e,n)=>{let{className:s,orientation:l="horizontal",decorative:a=!0,...d}=e;return(0,r.jsx)(t.b,{ref:n,decorative:a,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...d})});a.displayName=t.b.displayName},22894:(e,n,s)=>{"use strict";s.d(n,{default:()=>L});var r=s(95155),l=s(73312),t=s(33900),i=s(15157),a=s(74035),d=s(87364),c=s(40767),o=s(3589),u=s(12115),m=s(83391),x=s(2291),f=s(65564),h=s(20698),g=s(8247);function p(){let e=(0,h._)(["\n  query getProducts {\n    products(order_by: { created_at: desc }) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      shop {\n        id\n        name\n        logo\n        description\n        address\n        phone\n        remark\n        shop_admin_name\n      }\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n      }\n    }\n  }\n"]);return p=function(){return e},e}function j(){let e=(0,h._)(["\n  query getProducts {\n    products(order_by: { price: asc }, limit: 5) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      shop {\n        id\n        name\n        logo\n        description\n        address\n        phone\n        remark\n        shop_admin_name\n      }\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n      }\n    }\n  }\n"]);return j=function(){return e},e}function v(){let e=(0,h._)(["\n  query getProducts($id: uuid!) {\n    products(where: { id: { _eq: $id } }) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      shop {\n        id\n        name\n        logo\n        description\n        address\n        phone\n        remark\n        shop_admin_name\n      }\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n      }\n    }\n  }\n"]);return v=function(){return e},e}function w(){let e=(0,h._)(["\n  query getProducts($category_id: uuid!) {\n    products(where: { category_id: { _eq: $category_id } }) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      shop {\n        id\n        name\n        logo\n        description\n        address\n        phone\n        remark\n        shop_admin_name\n      }\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n      }\n    }\n  }\n"]);return w=function(){return e},e}function b(){let e=(0,h._)(["\n  query getFilteredProducts(\n    $where: products_bool_exp\n    $offset: Int\n    $limit: Int\n  ) {\n    products(\n      where: $where\n      order_by: { created_at: desc }\n      offset: $offset\n      limit: $limit\n    ) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      shop {\n        id\n        name\n        logo\n        description\n        address\n        phone\n        remark\n        shop_admin_name\n      }\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n      }\n    }\n  }\n"]);return b=function(){return e},e}(0,g.J1)(p()),(0,g.J1)(j());let y=(0,g.J1)(v());(0,g.J1)(w());let N=(0,g.J1)(b());var _=s(48870);let k=e=>{var n;let{data:s,loading:r,error:l,refetch:t}=(0,_.IT)(y,{variables:{id:e},skip:!e});return{product:(null==s?void 0:null===(n=s.products)||void 0===n?void 0:n[0])||null,loadingProduct:r,error:l,refetchProduct:t}},q=()=>{var e,n;let[s,r]=(0,u.useState)({}),[l,t]=(0,u.useState)(1),[i,a]=(0,u.useState)(10),d=(0,u.useMemo)(()=>(l-1)*i,[l,i]),c=(0,u.useMemo)(()=>{let e={};return s.shop_id&&(e.shop_id={_eq:s.shop_id}),s.name&&(e.name={_ilike:"%".concat(s.name,"%")}),s.category&&(e.category={id:{_eq:s.category}}),s.priceRange&&(e.price={_gte:s.priceRange.start_price,_lte:s.priceRange.end_price}),Object.keys(e).length>0?e:void 0},[s]),{data:o,loading:m,error:x,refetch:f}=(0,_.IT)(N,{variables:{where:c,offset:d,limit:i},fetchPolicy:"network-only"});return{products:(null==o?void 0:o.products)||[],loadingProducts:m,error:x,filters:s,setFilters:r,page:l,setPage:t,take:i,setTake:a,totalCount:(null==o?void 0:null===(n=o.products_aggregate)||void 0===n?void 0:null===(e=n.aggregate)||void 0===e?void 0:e.count)||1,refetchProducts:f}};var C=s(21567),S=s(5565);let $=e=>{var n,s,t,i;let{item:d,isSelected:c,onSelect:o}=e,{product:u,loadingProduct:h}=k(d.id),g=(0,m.wA)(),p=()=>{if(h)return;let e=d.quantity;if(u&&e+1>u.quantity){(0,f.oR)({description:"Cannot add more items than available in stock."});return}g((0,a.bE)({...d,quantity:1}))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:(0,C.cn)("w-full lg:flex md:flex hidden flex-row items-center justify-between px-2 py-6 hover:bg-slate-200",{"bg-slate-200":c}),children:[(0,r.jsx)("div",{className:"w-12 min-h-14 items-center justify-center lg:flex md:flex hidden",children:(0,r.jsx)(x.S,{checked:c,onCheckedChange:e=>o(e),id:d.id})}),(0,r.jsxs)("div",{className:"w-full flex lg:flex-row md:flex-row flex-col items-center justify-between",children:[(0,r.jsx)("div",{className:"text-muted-foreground text-lg",children:(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-start",children:(0,r.jsx)("div",{className:"md:w-20 lg:w-20 w-[10rem] lg:h-14 md:h-14 h-20 relative",children:(0,r.jsx)(S.default,{layout:"fill",alt:"product",src:(null==d?void 0:null===(n=d.images)||void 0===n?void 0:n[0].image_url)||"/images/image_placeholder.jpg",className:"object-cover"})})})}),(0,r.jsxs)("div",{className:"min-w-20 flex flex-col items-start justify-center gap-2",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Product"}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-start",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-left text-sm",children:"Brand:"}),(0,r.jsx)("span",{className:"text-sm",children:"No Brand"})]})]}),(0,r.jsx)("span",{className:"w-28 max-w-28 text-muted-foreground text-lg",children:(0,r.jsxs)("div",{className:"w-full flex items-center justify-start gap-2 text-muted-foreground",children:[(0,r.jsxs)("span",{className:"text-sm",children:["MMK ",null===(s=d.bulk_price)||void 0===s?void 0:s.toLocaleString()]}),(0,r.jsxs)("span",{className:"line-through  text-xs",children:["MMK ",d.price.toLocaleString()]})]})}),(0,r.jsx)("div",{className:"min-w-20 text-muted-foreground text-lg",children:(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex flex-row flex-shrink-0 w-28 max-w-28 border items-center border-gray-400 rounded",children:[(0,r.jsx)(l.$,{onClick:()=>g((0,a.JA)(d.id)),className:"h-full w-1/3 rounded-r-none rounded-l bg-transparent border-r hover:bg-secondary_color hover:text-white text-black",children:"-"}),(0,r.jsx)("div",{className:"w-1/3 h-full text-center flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:d.quantity})}),(0,r.jsx)(l.$,{onClick:p,className:"h-full w-1/3 bg-transparent rounded-l-none border-l text-black hover:bg-secondary_color hover:text-white rounded-r",children:"+"})]})})}),(0,r.jsxs)("span",{className:"min-w-28 text-muted-foreground text-sm",children:["MMK"," ",((d.bulk_price&&d.bulk_price>0?d.bulk_price:d.price)*d.quantity).toLocaleString()]})]})]},d.id),(0,r.jsx)("div",{className:"w-full lg:hidden md:hidden flex flex-col min-h-28 p-3",children:(0,r.jsxs)("div",{className:"w-full h-full flex flex-row gap-4 py-3",children:[(0,r.jsxs)("div",{className:"flex flex-row items-start h-full",children:[(0,r.jsx)("div",{className:"w-12 min-h-14 items-center justify-center flex",children:(0,r.jsx)(x.S,{checked:c,onCheckedChange:e=>o(e),id:d.id})}),(0,r.jsx)("div",{className:"w-24 h-20 relative",children:(0,r.jsx)(S.default,{layout:"fill",alt:"product",src:(null==d?void 0:null===(t=d.images)||void 0===t?void 0:t[0].image_url)||"/images/image_placeholder.jpg",className:"object-cotain bg-white"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 justify-start",children:[(0,r.jsx)("h2",{className:"font-semibold",children:d.name}),(0,r.jsxs)("span",{className:"text-muted-foreground text-xs",children:["Brand: ",(0,r.jsx)("span",{className:"text-secondary_color",children:"No brand"})]}),(0,r.jsxs)("div",{className:"w-full mt-2 flex items-center justify-start gap-2 text-muted-foreground",children:[(0,r.jsxs)("span",{className:"text-sm",children:["MMK ",null===(i=d.bulk_price)||void 0===i?void 0:i.toLocaleString()]}),(0,r.jsxs)("span",{className:"line-through  text-xs",children:["MMK ",d.price.toLocaleString()]})]}),(0,r.jsxs)("span",{className:"text-sm",children:["Total MMK "," ",((d.bulk_price&&d.bulk_price>0?d.bulk_price:d.price)*d.quantity).toLocaleString()]}),(0,r.jsxs)("div",{className:"flex flex-row flex-shrink-0 w-28 max-w-28 border items-center border-gray-400 rounded mt-3",children:[(0,r.jsx)(l.$,{onClick:()=>g((0,a.JA)(d.id)),className:"h-full w-1/3 rounded-r-none rounded-l bg-transparent border-r hover:bg-secondary_color hover:text-white text-black",children:"-"}),(0,r.jsx)("div",{className:"w-1/3 h-full text-center flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:d.quantity})}),(0,r.jsx)(l.$,{onClick:p,className:"h-full w-1/3 bg-transparent rounded-l-none border-l text-black hover:bg-secondary_color hover:text-white rounded-r",children:"+"})]})]})]})})]})};var M=s(83233),P=s(76046);let A=e=>e.reduce((e,n)=>e+(n&&n.bulk_price&&n.bulk_price>0?n.bulk_price:n.price)*n.quantity,0),L=()=>{var e;let[n,s]=(0,u.useState)(!1),f=(0,m.wA)(),h=(0,P.useRouter)(),[g,p]=(0,u.useState)([]),j=(0,m.d4)(e=>e.cart.cartItems),v=j.length>0&&g.length===j.length,w=e=>{e?p(j.map(e=>e.id)):p([])},b=(e,n)=>{n?p(n=>[...n,e]):p(n=>n.filter(n=>n!==e))},y=A(j),N=j&&j[0]?null===(e=j[0].category)||void 0===e?void 0:e.id:null,{products:_,setTake:k,setFilters:S}=q(),L=null==_?void 0:_.filter(e=>!j.find(n=>n.id===e.id));return(0,u.useEffect)(()=>{k(10),S({shop_id:"",name:"",category:N})},[S,k]),(0,u.useEffect)(()=>{s(!0),(0,C.o)()},[j]),(0,r.jsxs)("section",{className:"w-full flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"lg:w-4/5 md:w-full w-full flex flex-col",children:[(0,r.jsxs)("div",{className:"w-full lg:flex md:flex hidden flex-row items-center justify-between p-2",children:[(0,r.jsx)("div",{className:"w-12 min-h-14 flex items-center justify-center",children:(0,r.jsx)(x.S,{checked:v,onCheckedChange:e=>w(e),id:"select-all"})}),(0,r.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[(0,r.jsx)("span",{className:"min-w-20 text-muted-foreground",children:"Item"}),(0,r.jsx)("span",{className:"min-w-20 text-muted-foreground"}),(0,r.jsx)("div",{className:"min-w-28 text-muted-foreground",children:"Discount Price"}),(0,r.jsx)("span",{className:"min-w-20 text-muted-foreground",children:"Quantity"}),(0,r.jsx)("span",{className:"min-w-28 text-muted-foreground",children:"Total"})]})]}),(0,r.jsxs)("div",{className:"w-full flex lg:hidden md:hidden flex-row items-center justify-start px-3",children:[(0,r.jsx)("div",{className:"min-w-12 min-h-14 flex flex-row items-center justify-center",children:(0,r.jsx)(x.S,{checked:v,onCheckedChange:e=>w(e),id:"select-all"})}),(0,r.jsx)("span",{children:"All"})]}),(0,r.jsxs)("div",{className:"w-full mt-4 flex flex-col border shadow-lg rounded-md lg:h-[70vh] overflow-auto scrollbar-thin",children:[n&&j.length>0&&j.map(e=>(0,r.jsx)($,{item:e,isSelected:g.includes(e.id),onSelect:n=>b(e.id,n)},e.id)),n&&j.length<1?(0,r.jsxs)("div",{className:"w-full lg:h-full md:h-full h-20 flex lg:flex-row md:flex-row flex-col items-center justify-center lg:gap-3 md:gap-3",children:[(0,r.jsx)("h2",{className:"text-secondary_color",children:"No item in the cart!"}),(0,r.jsx)("span",{onClick:()=>h.push("/home"),className:"underline text-blue-500 hover:cursor-pointer",children:"Shop Now"})]}):null]}),(0,r.jsx)("div",{className:"h-6"}),(0,r.jsx)(i.w,{className:"my-4 border-t border-gray-400"}),(0,r.jsxs)("div",{className:"min-h-16 flex lg:flex-row md:flex-row flex-col items-center justify-between lg:gap-0 md:gap-0 gap-6",children:[(0,r.jsxs)("div",{className:"flex lg:flex-row md:flex-row flex-col lg:gap-4 md:gap-4 gap-2",children:[(0,r.jsxs)(l.$,{onClick:()=>h.push("/home"),className:"flex flex-row h-8 gap-2 items-center bg-secondary_color text-white rounded-md",children:[(0,r.jsx)(d.A,{}),"continue shopping"]}),(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>f((0,a.sX)()),className:"flex flex-row h-8 gap-2 items-center text-secondary_color rounded-md",children:[(0,r.jsx)(c.A,{}),"clear shopping cart"]})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-4 items-center lg:mr-12",children:[(0,r.jsx)("span",{className:"text-secondary_color text-sm",children:"Subtotal:"}),n&&(0,r.jsxs)("span",{className:"font-semibold",children:["MMK"," ",y.toLocaleString()]})]})]}),(0,r.jsx)(i.w,{className:"my-4 border-t border-gray-400"}),(0,r.jsx)("div",{className:"w-full lg:py-12 md:py-10 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-[33rem] min-h-24 flex flex-col gap-4",children:[(0,r.jsxs)("p",{className:"text-center text-sm text-muted-foreground leading-6",children:["To enjoy exclusive savings on your purchase, please enter your discount coupon code if you have one available. Make sure to check for any expiration dates or specific terms associated with your coupon!"," "]}),(0,r.jsxs)("div",{className:"w-full relative lg:mt-8 md:mt-8 mt-4",children:[(0,r.jsx)(t.p,{className:"w-full h-10 rounded-md bg-secondary_color/20 pr-24 pl-4 focus-visible:ring-offset-0 focus-visible:ring-0",placeholder:"Enter cupon code"}),(0,r.jsxs)("div",{className:"absolute right-2.5 top-[0.5rem] flex flex-row items-center gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.A,{color:"black",strokeWidth:1.25})}),(0,r.jsx)(l.$,{className:"rounded-lg border-none h-6 text-sm text-secondary_color",variant:"outline",children:"Apply Cupon"})]})]})]})}),(0,r.jsx)(i.w,{className:"my-4 border-t border-gray-400"}),(0,r.jsx)("div",{className:"flex items-center justify-center mt-8",children:(0,r.jsxs)(l.$,{onClick:()=>h.push("/checkout"),className:"rounded-md min-h-6 min-w-10 bg-secondary_color text-white",children:["Proceed to checkout (",n&&j.length>0?j.length:0,")"]})})]}),(0,r.jsx)("div",{className:"w-full min-h-32",children:(0,r.jsx)(M.ProductReel,{products:L||[]})})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[7525,5565,6299,4065,7204,2852,5468,3233,8441,1517,7358],()=>n(81678)),_N_E=e.O()}]);