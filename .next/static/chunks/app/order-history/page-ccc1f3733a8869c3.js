(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1060],{71160:(e,n,a)=>{Promise.resolve().then(a.bind(a,29857))},91902:(e,n,a)=>{"use strict";a.d(n,{A:()=>s});let s=(0,a(67401).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},71743:(e,n,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(n,{A:()=>m});var r=a(34090),t=a(15169),l=a(33634),d=a(95647),i=a.n(d),o=a(21567);let e=async()=>{let e=await (0,o.v)();return(null==e?void 0:e.token)||null},c=await e(),m=new r.R({ssrMode:!0,link:new t.P({uri:"https://api.natsay.com.mm/v1/graphql",fetch:i(),headers:{...c?{Authorization:"Bearer ".concat(c)}:{}}}),cache:new l.D});s()}catch(e){s(e)}},1)},51562:(e,n,a)=>{"use strict";a.d(n,{es:()=>m,$u:()=>u,WF:()=>g});var s=a(20698),r=a(8247);function t(){let e=(0,s._)(["\n  mutation insertOrder($input: orders_insert_input!) {\n    insert_orders_one(object: $input) {\n      id\n      user_id\n      status\n      total_price\n      payment_id\n      payment_proof\n      shipping_address\n    }\n  }\n"]);return t=function(){return e},e}function l(){let e=(0,s._)(["\n  mutation insertOrder($input: order_items_insert_input!) {\n    insert_order_items_one(object: $input) {\n      id\n      order_id\n      product_id\n      shop_id\n      quantity\n      price\n      subtotal\n    }\n  }\n"]);return l=function(){return e},e}let d=(0,r.J1)(t()),i=(0,r.J1)(l());function o(){let e=(0,s._)(["\n  query GetOrders($where: orders_bool_exp, $offset: Int, $limit: Int) {\n    orders(\n      where: $where\n      offset: $offset\n      limit: $limit\n      order_by: { created_date: desc }\n    ) {\n      id\n      user_id\n      status\n      total_price\n      shipping_address\n      payment_id\n      payment_proof\n      created_date\n      updated_date\n      order_items {\n        quantity\n        subtotal\n        price\n        shop_id\n        product {\n          id\n          name\n          images {\n            id\n            image_url\n          }\n        }\n      }\n    }\n    orders_aggregate(where: $where) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return o=function(){return e},e}let c=(0,r.J1)(o()),m=async(e,n)=>{try{var a;let{data:s}=await e.mutate({mutation:d,variables:{input:n.input}});return null!==(a=null==s?void 0:s.insert_orders_one)&&void 0!==a?a:null}catch(e){return console.log("Error inserting orders:",e.message||e),null}},u=async(e,n)=>{try{var a;let{data:s}=await e.mutate({mutation:i,variables:{input:n.input}});return null!==(a=null==s?void 0:s.insert_order_items_one)&&void 0!==a?a:null}catch(e){return console.log("Error inserting orders:",e.message||e),null}},g=async(e,n)=>{try{var a,s;let{where:r,offset:t,limit:l}=n;if(!c)throw Error("GraphQL query GET_ORDERS is not defined.");let{data:d}=await e.query({query:c,fetchPolicy:"no-cache",variables:{where:r,offset:t,limit:l}});if(!d)throw Error("No data returned from GraphQL query.");return{orders:d.orders||[],count:(null===(s=d.orders_aggregate)||void 0===s?void 0:null===(a=s.aggregate)||void 0===a?void 0:a.count)||0}}catch(e){return console.error("Error fetching orders:",e.message||e),{orders:[],count:0}}}},76499:(e,n,a)=>{"use strict";a.d(n,{F_:()=>t,rD:()=>r,w8:()=>l,z6:()=>s});let s=[{id:"1",name:"Yangon"},{id:"2",name:"Mandalay"}],r=[{id:"1",zone:"Yangon",province:[{id:"1",name:"North Dagon"},{id:"2",name:"South Dagon"},{id:"3",name:"Bahan"},{id:"4",name:"Hlaing"}]},{id:"2",zone:"Mandalay",province:[{id:"1",name:"Chan Aye Tharzan"},{id:"2",name:"29x24 Street"},{id:"3",name:"Kan Daw Mon"},{id:"4",name:"30th Street"}]}],t=[{id:"abfa998a-8e84-4ca0-887e-79f572127bdd",name:"Cash On Delivery",logo:"/images/payment/kpay.png"},{id:"5af460bc-bb4c-4183-b655-22d8dcc18d36",name:"KBZ Pay",logo:"/images/payment/kpay.png"},{id:"b6447a68-7a77-4365-a23f-6d9232a4ee27",name:"Wave Pay",logo:"/images/payment/wave.jpg"},{id:"d776755c-0120-4831-91fb-a8f8a7e5f233",name:"Aya Pay",logo:"/images/payment/aya.jpg"}],l=[{id:"1",name:"All",value:null},{id:"2",name:"Pending",value:"Pending"},{id:"3",name:"Processing",value:"Processing"},{id:"4",name:"Shipped",value:"Shipped"},{id:"5",name:"Delivered",value:"Delivered"}]},21567:(e,n,a)=>{"use strict";a.d(n,{cn:()=>l,o:()=>i,v:()=>d});var s=a(43463),r=a(69795),t=a(2818);function l(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];return(0,r.QP)((0,s.$)(n))}let d=async()=>{try{let e=t.env.NEXT_PUBLIC_BASE_URL||"http://192.168.91.70:3000",n=await fetch("".concat(e,"/api/auth/session"),{headers:{"Content-Type":"application/json"}});if(n.ok)return await n.json();return null}catch(e){return console.error("Error fetching session data:",e),null}},i=async()=>{localStorage.removeItem("success")}},11327:(e,n,a)=>{"use strict";a.d(n,{A:()=>u});var s=a(95155),r=a(91902),t=a(51719),l=a(67401);let d=(0,l.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),i=(0,l.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=a(40767),c=a(5565),m=a(12115);let u=e=>{let{orders:n}=e,[a,l]=(0,m.useState)({}),u=e=>{l(n=>({...n,[e]:!n[e]}))};return(0,s.jsx)(s.Fragment,{children:n.map((e,n)=>{var l;return(0,s.jsxs)("div",{className:"w-full p-6 border border-gray-300 rounded-md min-h-32 flex flex-col gap-6 bg-white",children:[(0,s.jsxs)("div",{className:"w-full grid lg:grid-cols-7 md:grid-cols-7 grid-cols-2 min-h-10 mt-5 lg:gap-0 md:gap-0 gap-y-5",children:[(0,s.jsxs)("div",{className:"lg:col-span-4 md:col-span-4 col-span-2 grid lg:grid-cols-4 md:grid-cols-4 grid-cols-2 lg:gap-0 md:gap-0 gap-y-5",children:[(0,s.jsxs)("div",{className:"col-span-1 flex flex-col gap-2 items-start border-r border-gray-300",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Order Number"}),(0,s.jsx)("span",{className:"text-sm text-black font-semibold",children:e.id.length>13?"".concat(e.id.substring(0,13),"..."):e.id})]}),(0,s.jsxs)("div",{className:"col-span-1 pl-3 flex flex-col gap-2 items-start lg:border-r md:border-r border-r-0 border-gray-300",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Ordered On"}),(0,s.jsx)("span",{className:"text-sm text-black font-semibold",children:new Date((null==e?void 0:e.created_date)||"").toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"col-span-1 lg:pl-3 md:pl-3 pl-0 flex flex-col gap-2 items-start border-r border-gray-300",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Delivered On"}),(0,s.jsx)("span",{className:"text-sm text-black font-semibold",children:(null==e?void 0:e.updated_date)?new Date(null==e?void 0:e.updated_date).toLocaleDateString():"Pending"})]}),(0,s.jsxs)("div",{className:"col-span-1 pl-3 flex flex-col gap-2 items-start",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"Shipped To"}),(0,s.jsx)("span",{className:"text-sm text-black font-semibold",children:e.shipping_address})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-3 md:col-span-3 col-span-2 flex flex-row items-center text-sm",children:[(0,s.jsx)("div",{className:"w-1/2 flex items-center lg:justify-center md:justify-center justify-start",children:(0,s.jsx)("span",{className:"px-4 py-1 rounded-md border bg-white",children:"Pending"})}),(0,s.jsx)("div",{className:"w-1/2 flex items-center justify-center",children:(0,s.jsx)("button",{onClick:()=>u(n),className:"px-4 py-1 rounded-md border flex flex-row items-center gap-2 text-muted-foreground",children:a[n]?(0,s.jsxs)(s.Fragment,{children:["View less ",(0,s.jsx)(r.A,{size:16})]}):(0,s.jsxs)(s.Fragment,{children:["View more ",(0,s.jsx)(t.A,{size:16})]})})})]})]}),a[n]&&e&&(null===(l=e.order_items)||void 0===l?void 0:l.map((e,n)=>{var a,r,t;return(0,s.jsxs)("div",{className:"w-full grid lg:grid-cols-7 md:grid-cols-7 grid-cols-2 min-h-10 pt-8 border-t py-4 border-gray-300 lg:gap-0 md:gap-0 gap-y-5",children:[(0,s.jsx)("div",{className:"lg:col-span-4 md:col-span-4 col-span-2 w-full flex flex-row gap-2",children:(0,s.jsxs)("div",{className:"flex flex-row gap-3 w-full",children:[(0,s.jsx)("div",{className:"relative w-full lg:max-[150px] md:max-[150px] max-w-[120px]",children:(0,s.jsx)(c.default,{src:null==e?void 0:null===(r=e.product)||void 0===r?void 0:null===(a=r.images)||void 0===a?void 0:a[0].image_url,alt:"product-image",layout:"fill",objectFit:"contain",className:"w-full lg:max-h-[100px] md:max-h-[80px]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-sm",children:null==e?void 0:null===(t=e.product)||void 0===t?void 0:t.name}),(0,s.jsxs)("span",{className:"text-sm",children:["Brand: ",(0,s.jsx)("strong",{children:"Brand"})]}),(0,s.jsxs)("div",{className:"flex lg:flex-row md:flex-row flex-col lg:items-center md:items-center items-start lg:gap-10 md:gap-10 gap-3 text-sm",children:[(0,s.jsxs)("span",{className:"text-muted-foreground min-w-20 flex flex-row items-center gap-3",children:[(0,s.jsx)(d,{size:18})," Buy again"]}),(0,s.jsxs)("span",{className:"text-muted-foreground flex flex-row items-center gap-3",children:[(0,s.jsx)(i,{size:18})," Buy again"]})]})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-3 md:col-span-3 col-span-2 flex lg:flex-row md:flex-row flex-col items-start",children:[(0,s.jsxs)("div",{className:"lg:w-1/2 md:w-1/2 w-full px-4 lg:flex lg:flex-row md:flex md:flex-row grid grid-cols-2 justify-end",children:[(0,s.jsx)("div",{className:"col-span-1 lg:hidden md:hidden"}),(0,s.jsxs)("span",{className:"w-full lg:text-right md:text-right text-left text-muted-foreground flex flex-row items-center lg:justify-end md:justify-end",children:[(0,s.jsx)(o.A,{size:14}),e.quantity]})]}),(0,s.jsxs)("div",{className:"lg:w-1/2 md:w-1/2 w-full g:flex lg:flex-row md:flex md:flex-row grid grid-cols-2 justify-end",children:[(0,s.jsx)("div",{className:"col-span-1 lg:hidden md:hidden"}),(0,s.jsx)("span",{className:"text-sm",children:(0,s.jsxs)("strong",{children:["MMK ",(null==e?void 0:e.subtotal.toLocaleString())||""]})})]})]})]},n)}))]},n)})})}},29857:(e,n,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(n,{default:()=>g});var r=a(95155),t=a(76499),l=a(51562),d=a(12115),i=a(11327),o=a(21567),c=a(71743),m=a(43463),u=e([c]);c=(u.then?(await u)():u)[0];let g=()=>{let[e,n]=d.useState(null),[a,s]=d.useState(null),[u,g]=d.useState(null);return(0,d.useEffect)(()=>{(async()=>{let e=await (0,o.v)();e&&g(e)})()},[]),(0,d.useEffect)(()=>{u&&u.userId&&(async()=>{let e={user_id:{_eq:u.userId}};a&&(e.status={_eq:a});let s=await (0,l.WF)(c.A,{where:e,offset:0,limit:10});s?n(s.orders):console.log("No response")})()},[u,a,n]),console.log("filter:",a),(0,r.jsxs)("div",{className:"w-full min-h-24 flex flex-col gap-5",children:[(0,r.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,r.jsx)("h1",{className:"font-semibold text-subheading",children:"My Order"}),(0,r.jsxs)("div",{className:"flex lg:flex-row md:flex-row flex-col items-center justify-between",children:[(0,r.jsx)("div",{className:"flex lg:flex-row md:flex-row flex-wrap items-center lg:gap-6 md:gap-6 gap-3 justify-start",children:t.w8.map(e=>(0,r.jsx)("span",{onClick:()=>s(e.value),className:(0,m.A)(" hover:cursor-pointer",{"text-black":a===e.value,"text-secondary_color":a!==e.value}),children:e.name},e.id))}),(0,r.jsx)("button",{})]})]}),(0,r.jsx)("div",{className:"w-full flex flex-col gap-5",children:(0,r.jsx)(i.A,{orders:e||[]})})]})};s()}catch(e){s(e)}})}},e=>{var n=n=>e(e.s=n);e.O(0,[7525,5565,4065,9217,7204,4929,8441,1517,7358],()=>n(71160)),_N_E=e.O()}]);