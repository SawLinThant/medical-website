(()=>{var e={};e.id=60,e.ids=[60],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},77805:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=s(70260),a=s(28203),l=s(25155),i=s.n(l),n=s(67292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["order-history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9197)),"D:\\NextJS\\new medical web\\natsay_web_client\\src\\app\\order-history\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,21476)),"D:\\NextJS\\new medical web\\natsay_web_client\\src\\app\\order-history\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"D:\\NextJS\\new medical web\\natsay_web_client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\NextJS\\new medical web\\natsay_web_client\\src\\app\\order-history\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/order-history/page",pathname:"/order-history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},58635:(e,t,s)=>{Promise.resolve().then(s.bind(s,23515))},41603:(e,t,s)=>{Promise.resolve().then(s.bind(s,12951))},56337:(e,t,s)=>{"use strict";s.d(t,{es:()=>n,$u:()=>d,WF:()=>o});var r=s(37713);let a=(0,r.J1)`
  mutation insertOrder($input: orders_insert_input!) {
    insert_orders_one(object: $input) {
      id
      user_id
      status
      total_price
      payment_id
      payment_proof
      shipping_address
    }
  }
`,l=(0,r.J1)`
  mutation insertOrder($input: order_items_insert_input!) {
    insert_order_items_one(object: $input) {
      id
      order_id
      product_id
      shop_id
      quantity
      price
      subtotal
    }
  }
`,i=(0,r.J1)`
  query GetOrders($where: orders_bool_exp, $offset: Int, $limit: Int) {
    orders(
      where: $where
      offset: $offset
      limit: $limit
      order_by: { created_date: desc }
    ) {
      id
      user_id
      status
      total_price
      shipping_address
      payment_id
      payment_proof
      created_date
      updated_date
      order_items {
        quantity
        subtotal
        price
        shop_id
        product {
          id
          name
          images {
            id
            image_url
          }
        }
      }
    }
    orders_aggregate(where: $where) {
      aggregate {
        count
      }
    }
  }
`,n=async(e,t)=>{try{let{data:s}=await e.mutate({mutation:a,variables:{input:t.input}});return s?.insert_orders_one??null}catch(e){return console.log("Error inserting orders:",e.message||e),null}},d=async(e,t)=>{try{let{data:s}=await e.mutate({mutation:l,variables:{input:t.input}});return s?.insert_order_items_one??null}catch(e){return console.log("Error inserting orders:",e.message||e),null}},o=async(e,t)=>{try{let{where:s,offset:r,limit:a}=t;if(!i)throw Error("GraphQL query GET_ORDERS is not defined.");let{data:l}=await e.query({query:i,fetchPolicy:"no-cache",variables:{where:s,offset:r,limit:a}});if(!l)throw Error("No data returned from GraphQL query.");return{orders:l.orders||[],count:l.orders_aggregate?.aggregate?.count||0}}catch(e){return console.error("Error fetching orders:",e.message||e),{orders:[],count:0}}}},35721:(e,t,s)=>{"use strict";s.d(t,{F_:()=>l,nR:()=>n,rD:()=>a,w8:()=>i,z6:()=>r});let r=[{id:"1",name:"Yangon"},{id:"2",name:"Mandalay"}],a=[{id:"1",zone:"Yangon",province:[{id:"1",name:"North Dagon"},{id:"2",name:"South Dagon"},{id:"3",name:"Bahan"},{id:"4",name:"Hlaing"}]},{id:"2",zone:"Mandalay",province:[{id:"1",name:"Chan Aye Tharzan"},{id:"2",name:"29x24 Street"},{id:"3",name:"Kan Daw Mon"},{id:"4",name:"30th Street"}]}],l=[{id:"abfa998a-8e84-4ca0-887e-79f572127bdd",name:"Cash On Delivery",logo:"/images/payment/kpay.png"},{id:"5af460bc-bb4c-4183-b655-22d8dcc18d36",name:"KBZ Pay",logo:"/images/payment/kpay.png"},{id:"b6447a68-7a77-4365-a23f-6d9232a4ee27",name:"Wave Pay",logo:"/images/payment/wave.jpg"},{id:"d776755c-0120-4831-91fb-a8f8a7e5f233",name:"Aya Pay",logo:"/images/payment/aya.jpg"}],i=[{id:"1",name:"All",value:null},{id:"2",name:"Pending",value:"Pending"},{id:"3",name:"Delivering",value:"Delivering"},{id:"4",name:"Completed",value:"Completed"},{id:"5",name:"Cancelled",value:"Cancelled"}],n=[{id:"Highest to Lowest",name:"Highest to Lowest"},{id:"Lowest to Highest",name:"Lowest to Highest"}]},28945:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(45512),a=s(28638),l=s(98755),i=s(41680);let n=(0,i.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),d=(0,i.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=s(44269),c=s(45103),m=s(58009);let x=({orders:e})=>{let[t,s]=(0,m.useState)({}),i=e=>{s(t=>({...t,[e]:!t[e]}))};return(0,r.jsx)(r.Fragment,{children:e.map((e,s)=>(0,r.jsxs)("div",{className:"w-full p-6 border border-gray-300 rounded-md min-h-32 flex flex-col gap-6 bg-white",children:[(0,r.jsxs)("div",{className:"w-full grid lg:grid-cols-7 md:grid-cols-7 grid-cols-2 min-h-10 mt-5 lg:gap-0 md:gap-0 gap-y-5",children:[(0,r.jsxs)("div",{className:"lg:col-span-4 md:col-span-4 col-span-2 grid lg:grid-cols-4 md:grid-cols-4 grid-cols-2 lg:gap-0 md:gap-0 gap-y-5",children:[(0,r.jsxs)("div",{className:"col-span-1 flex flex-col gap-2 items-start border-r border-gray-300",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Order Number"}),(0,r.jsx)("span",{className:"text-sm text-black font-semibold",children:e.id.length>13?`${e.id.substring(0,13)}...`:e.id})]}),(0,r.jsxs)("div",{className:"col-span-1 pl-3 flex flex-col gap-2 items-start lg:border-r md:border-r border-r-0 border-gray-300",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Ordered On"}),(0,r.jsx)("span",{className:"text-sm text-black font-semibold",children:new Date(e?.created_date||"").toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"col-span-1 lg:pl-3 md:pl-3 pl-0 flex flex-col gap-2 items-start border-r border-gray-300",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Delivered On"}),(0,r.jsx)("span",{className:"text-sm text-black font-semibold",children:e?.updated_date?new Date(e?.updated_date).toLocaleDateString():""})]}),(0,r.jsxs)("div",{className:"col-span-1 pl-3 flex flex-col gap-2 items-start",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Shipped To"}),(0,r.jsx)("span",{className:"text-sm text-black font-semibold",children:e.shipping_address})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-3 md:col-span-3 col-span-2 flex flex-row items-center text-sm",children:[(0,r.jsx)("div",{className:"w-1/2 flex items-center lg:justify-center md:justify-center justify-start",children:(0,r.jsx)("span",{className:"px-4 py-1 rounded-md border bg-white",children:e.status})}),(0,r.jsx)("div",{className:"w-1/2 flex items-center justify-center",children:(0,r.jsx)("button",{onClick:()=>i(s),className:"px-4 py-1 rounded-md border flex flex-row items-center gap-2 text-muted-foreground",children:t[s]?(0,r.jsxs)(r.Fragment,{children:["View less ",(0,r.jsx)(a.A,{size:16})]}):(0,r.jsxs)(r.Fragment,{children:["View more ",(0,r.jsx)(l.A,{size:16})]})})})]})]}),t[s]&&e&&e.order_items?.map((e,t)=>r.jsxs("div",{className:"w-full grid lg:grid-cols-7 md:grid-cols-7 grid-cols-2 min-h-10 pt-8 border-t py-4 border-gray-300 lg:gap-0 md:gap-0 gap-y-5",children:[r.jsx("div",{className:"lg:col-span-4 md:col-span-4 col-span-2 w-full flex flex-row gap-2",children:r.jsxs("div",{className:"flex flex-row gap-3 w-full",children:[r.jsx("div",{className:"relative w-full lg:max-[150px] md:max-[150px] max-w-[120px]",children:r.jsx(c.default,{src:e?.product?.images?.[0].image_url,alt:"product-image",layout:"fill",objectFit:"contain",className:"w-full lg:max-h-[100px] md:max-h-[80px]"})}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("h2",{className:"font-semibold text-sm",children:e?.product?.name}),r.jsxs("span",{className:"text-sm",children:["Brand: ",r.jsx("strong",{children:"Brand"})]}),r.jsxs("div",{className:"flex lg:flex-row md:flex-row flex-col lg:items-center md:items-center items-start lg:gap-10 md:gap-10 gap-3 text-sm",children:[r.jsxs("span",{className:"text-muted-foreground min-w-20 flex flex-row items-center gap-3",children:[r.jsx(n,{size:18})," Buy again"]}),r.jsxs("span",{className:"text-muted-foreground flex flex-row items-center gap-3",children:[r.jsx(d,{size:18})," Buy again"]})]})]})]})}),r.jsxs("div",{className:"lg:col-span-3 md:col-span-3 col-span-2 flex lg:flex-row md:flex-row flex-col items-start",children:[r.jsxs("div",{className:"lg:w-1/2 md:w-1/2 w-full px-4 lg:flex lg:flex-row md:flex md:flex-row grid grid-cols-2 justify-end",children:[r.jsx("div",{className:"col-span-1 lg:hidden md:hidden"}),r.jsxs("span",{className:"w-full lg:text-right md:text-right text-left text-muted-foreground flex flex-row items-center lg:justify-center md:justify-end",children:[r.jsx(o.A,{size:14}),e.quantity]})]}),r.jsxs("div",{className:"lg:w-1/2 md:w-1/2 w-full g:flex lg:flex-row md:flex md:flex-row grid grid-cols-2 justify-end",children:[r.jsx("div",{className:"col-span-1 lg:hidden md:hidden"}),r.jsx("span",{className:"text-sm",children:r.jsxs("strong",{children:["MMK ",e?.subtotal.toLocaleString()||""]})})]})]})]},t))]},s))})}},12951:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{default:()=>p});var a=s(45512),l=s(35721),i=s(56337),n=s(58009),d=s.n(n),o=s(28945),c=s(44195),m=s(23792),x=s(82281),u=e([m]);m=(u.then?(await u)():u)[0];let p=()=>{let[e,t]=d().useState(null),[s,r]=d().useState(null),[u,p]=d().useState(null);return(0,n.useEffect)(()=>{(async()=>{let e=await (0,c.v)();e&&p(e)})()},[]),(0,n.useEffect)(()=>{u&&u.userId&&(async()=>{let e={user_id:{_eq:u.userId}};s&&(e.status={_eq:s});let r=await (0,i.WF)(m.A,{where:e,offset:0,limit:100});r?t(r.orders):console.log("No response")})()},[u,s,t]),console.log("filter:",s),(0,a.jsxs)("div",{className:"w-full min-h-24 flex flex-col gap-5",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,a.jsx)("h1",{className:"font-semibold text-subheading",children:"My Order"}),(0,a.jsxs)("div",{className:"flex lg:flex-row md:flex-row flex-col items-center justify-between",children:[(0,a.jsx)("div",{className:"flex lg:flex-row md:flex-row flex-wrap items-center lg:gap-6 md:gap-6 gap-3 justify-start",children:l.w8.map(e=>(0,a.jsx)("span",{onClick:()=>r(e.value),className:(0,x.A)(" hover:cursor-pointer",{"text-black":s===e.value,"text-secondary_color":s!==e.value}),children:e.name},e.id))}),(0,a.jsx)("button",{})]})]}),(0,a.jsx)("div",{className:"w-full flex flex-col gap-5",children:(0,a.jsx)(o.A,{orders:e||[]})})]})};r()}catch(e){r(e)}})},21476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(62740),a=s(27837);function l({children:e}){return(0,r.jsx)(a.A,{children:e})}},9197:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(62740),a=s(23515);let l=()=>(0,r.jsx)("div",{className:"w-full max-w-[1300px] px-4",children:(0,r.jsx)(a.default,{})}),i=()=>(0,r.jsx)("section",{className:"w-full mt-16 flex items-center justify-center",children:(0,r.jsx)(l,{})})},23515:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\NextJS\\\\new medical web\\\\natsay_web_client\\\\src\\\\modules\\\\order\\\\lists\\\\index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\NextJS\\new medical web\\natsay_web_client\\src\\modules\\order\\lists\\index.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[681,692,543,138,341],()=>s(77805));module.exports=r})();